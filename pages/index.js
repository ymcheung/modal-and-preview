import Head from 'next/head';
import { useState, useReducer } from 'react';
import styles from '../styles/Home.module.css';

import UploadImage from './components/UploadImage';
import InputText from './components/InputText';
import SetBackground from './components/SetBackground';

export default function Home() {
  const [dialog, setDialog] = useState({
    image: false,
    text: false,
    background: false,
    title: ''
  });

  const textInputReducer = (state, action) => {
    return {};
  };

  const [quizName, setQuizName] = useReducer(textInputReducer, {});

  const sections = [
    {
      button: 'Upload Logo',
      dialogTitle: 'Logo',
      type: 'image'
    },
    {
      button: 'Upload Cover Logo',
      dialogTitle: 'Cover Photo',
      type: 'image'
    },
    {
      button: 'Input Quiz Name',
      dialogTitle: 'Text Input',
      type: 'text'
    },
    {
      button: 'Background',
      dialogTitle: 'Background Color/Image',
      type: 'background'
    }
  ];

  const handleDialog = (dialogType, dialogTitle) => {
    setDialog((prevState) => ({
      ...prevState,
      [dialogType]: !dialog.dialogName,
      dialogTitle: dialogTitle
    }));
  };

  return (
    <>
      <Head>
        <title>Create Next App</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <header>Cover Photo</header>
      <main className={styles.container}>
        {sections.map(({ button, dialogTitle, type }, index) => {
          return (
            <section className={styles.section} key={index}>
              <h2>preview text/image</h2>
              {/* if (!pre) return button */}
              <button
                type="button"
                onClick={() => handleDialog(type, dialogTitle)}
              >
                {button}
              </button>
            </section>
          );
        })}
      </main>
      <UploadImage isOpen={dialog.image} dialogTitle={dialog.dialogTitle} />
      <InputText isOpen={dialog.text} dialogTitle={dialog.dialogTitle} />
      <SetBackground
        isOpen={dialog.background}
        dialogTitle={dialog.dialogTitle}
      />
    </>
  );
}
